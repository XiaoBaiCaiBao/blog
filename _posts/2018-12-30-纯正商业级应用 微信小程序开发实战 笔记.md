---
title: 纯正商业级应用 微信小程序开发实战 笔记
layout: post
categories: ''
tags: ''
---
## 第6章
### 6-1 数据的三种来源
1. wxml
2. js -> wxml
3. 服务器 -> js -> wxml
三种方式没有好坏之分
### 6-2 数据绑定
跟Vue一样，data里定义数据，{{}}显示
### 6-3
{{}}里可以用三元表达式
### 6-4
封装组件技术上没有太大难度，难度在于决定组件的粒度，哪些数据应该开放哪些是内部数据，这些没有定论，要根据需求。
### 6-5
开放出来的数据：从组件的外部来设置该数据。放在properties里。
properties内每一项是一个对象。
      properties: {
        like: {
          type: , //(必填)
          value: ,
          observer: function(){}
        }
      }
### 6-6
let和var，不一定使用了let的就是好的代码
小程序里组件的methods里，修改数据用setData
      this.setData({

      })

## 第7章
### 7-1
组件一方面为了复用，另一方面为了代码分离。一个组件实现一个功能或极少功能，不要很多代码写在一起。代码分离的意义远大于复用。  
组件复用时一行代码不改成本很高，不必非要追求完全通用性。

### 7-2
如何调用课程给出的API来获取数据

### 7-3 生命周期函数

生命周期函数本质上和自己定义的监听事件是一样的，小程序来调用，不需要显示调用。
* onLoad: 监听页面加载
* onReady: 监听该页面初次渲染完成
* onShow: 监听页面显示
* onHide: 监听页面隐藏
* onUnload: 监听该页面卸载
* onPullDownRefresh:监听用户下拉动作

### 7-4 
向服务器发送http请求：wx.request(Object)，详细参数看文档。
fail表示并没有能够调用到服务器，而不是服务器返回错误码。所以4开头的状态码走的是success方法。

### 7-5 访问API获取数据
* 开发阶段可设置不校验合法域名。
* 请求错误调试方法：打开network查看具体的异常信息。

### 7-6 
wx.request(Object)只能是异步方法，所以不能将直接将结果赋值给变量。需要使用回调函数。回调函数是小程序触发的。

### 7-7
回调函数内this是null。ES5通过在外部定义变量来保存this，ES6通过箭头函数。

### 7-8
Promise解决的问题
* 异步嵌套（回调地狱）
* 回调函数剥夺了在函数里return的能力

### 7-9
声明固定不变常量用const

### 7-10
* ES6提供class来封装类。
* ES6里一个js文件就是一个模块。模块内部的变量在外部都不能被访问。
* import和export时可以重命名import {config as config1} from ''。之后可使用config1. 

### 7-11
ES5:`code.charAt(0)`;ES6:`code.startsWith()`,`endsWith`

### 7-12
* 引用类下面的实例方法，不能直接类名.方法名。需要先实例化即new一个对象
* 控制台里查看代码，带有[sm]后缀的文件是自己写的，不带的是小程序转化过的。
* ES6是一种语法糖，真正执行的时候并不是按照写的代码的样子。
* 本节和下一节讲解**调试错误**的方法，可以多看看。

### 7-13
* import时不要使用绝对路径，要使用相对路径。

### 7-14
封装类里处理回调函数，封装类里调用传入的参数里的函数。（看不懂这句话回去看视频）
### 7-15
success里：
      if(code.startWith('2)){
      }else{
        // 服务器异常
        wx.showToast({
          title: '',
          icon: '', // 不需要写是none
          duration: // 默认1500
        })
      }
fail里：API调用失败  
目前ES6里没有私有方法的概念，在方法名称前面加下划线人工定义。